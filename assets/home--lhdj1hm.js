import{d as i,u as l,c as u,a as p,t as d,b as h,e as a,o as f,f as g}from"./index-BFTKvHco.js";function w(){return navigator.serviceWorker.ready.then(function(n){return n.pushManager.getSubscription().then(function(r){return n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:m("BLPn_QWkclYPp_PQFNIwrFRcxL30uEIGKDTcPWsgZombBV1CRlnz7sqJEOYyJQYoW2BoiIT7Y-r31eZqsEFHU98")}).then(function(o){return o}).catch(function(o){console.log("订阅推送服务失败",o)})})})}function m(n){for(var r="=".repeat((4-n.length%4)%4),o=(n+r).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(o),s=new Uint8Array(t.length),e=0;e<t.length;++e)s[e]=t.charCodeAt(e);return s}const v={class:""},b=i({__name:"home",setup(n){const{userInfo:r}=l(),o=()=>{window.deferredPrompt.prompt()};window.addEventListener("beforeinstallprompt",e=>{console.log("beforeinstallprompt"),window.deferredPrompt=e,console.log(e),e.userChoice.then(c=>{c.outcome==="accepted"?(console.log("addDesktop-pwa用户安装了PWA——可打印---不显示按钮"),pwaIconShow.value=!1):console.log("用户拒绝安装PWA--可打印")})});const t=()=>{window.location.href=`https://github.com/login/oauth/authorize?client_id=Ov23liWi7ycK7kssllDs&redirect_uri=${window.location.href}`},s=()=>{w().then(e=>{console.log("3",e),g(e)})};return(e,c)=>(f(),u("div",v,[p(d(h(r))+" ",1),a("div",{class:"login",onClick:t}," 登录-- "),a("div",{class:"login",onClick:s}," 获取通知权限 "),a("div",{onClick:o}," 显示弹出 ")]))}});export{b as default};
